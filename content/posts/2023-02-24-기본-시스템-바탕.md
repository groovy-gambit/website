---
layout: blog
title: 기본 시스템 바탕
date: 2023-02-24T11:43:11.878-08:00
author: 김승진
thumbnail: /images/uploads/screen-shot-2023-02-24-at-10.44.20-am.png
tags:
  - 예삶주소록
---
주요 기능들을 지원하기 위한 내 아이디어들이다. 

2주 안에 달성할거면 이걸 다 할 수 없다. 밑에 2주 안에 해야 할 것 리스트도 만들었다.

- 사진 업로드
  - 공짜 티어가 구글은 15기가 니까 그것을 이요한다.
  - 사진용량을 최소화 하기 위해 일단 업로딩을 하면 그것을 리사이징 자동화하고 그것을 업로드/저장/이용한다.
- Auth
  - 이건 카톡의 로그인 / OIDC기반으로 해결한다.
  - 최고 관리 유저가 카톡 셀목자 방에 링크를 셰어하면 그 링크를 타고 오는 사람들은 뭐 자동 가입을 유저로 할 수 있다거나 식으로.
  - 또한 카톡 방들을 만들거나 뭐 이렇게 하려면 어떻게 해야 하는지, 모빌에서는 자동 로그인이 가능한지.. 아무튼 불편함을 최소한으로 해야 한다.
- 디비
  - 유저
  - 멤버
    - 전체 공동체 멤버
    - 멤버 사진은 아래
  - Asset
    - 사진 저장된 장소 기록 및 유저/멤버랑 연동
  - 모임 (Groups)
    - 모임은 단계별로 nesting가능해야함
    - 근데 새신자는 그게 가능할까?
  - Group_Members
    - 만약 nested grouping 이되면 어느 묶음에 어느 멤버가 포함된걸 어떻게 저장하지?
  - 기도제목
    - 멤버별
    - 날짜별
    - 어느 그룹에서 나누었는지
- 다른 몇개의 사항들
  - 카톡 프로필 사진은 저장 안한다. 뭐하러 캐쉬하니, 그것은 언제나 카톡에서 빼온다.
- 모든 카톡 로그인이 유저로 바뀌어선 안된다.
  - 매 텀마다 리더는 바뀔수도 있고, 그 유저들은 가입을 못하거나, 계정 권한이 없어지거나 한다.
- 유저 레벨에 따른 기능/UI제한
  - 목회진
    - 공동체 안에 모임들 편집
      - 청1/2/3
      - 새신자
      - 셀
    - 리더 권한들도 포함
  - 리더
    - 셀 모임 기도제목 올리기
    - 목회진께 비밀로 건의사항
    - 카톡 관련 기능
      - 현재 새신자 리스트 뽑기
      - 이번주 생일자 리스트 뽑기
      - 카톡으로 방 생성 (이런게 가능하면)
  - 최고 운영자
    - 디비 들어가서 실제로 고칠때
    - 교회차원 (SaaS 로 치면 tenant) 생성
    - 공동체의 첫 목회진 유저 생성할때

## 2주 안에 하려면 아래처럼 만들어야 한다

- phx.gen.auth 코드 생성된거 고치고 유닛 테스트도 고치기
- 디비 테이블 및 context module functions들은 만들어 놓고
- 유저들은 사전에 만들어 놓기
- 로그인도 카톡 연동은 빼고 그냥 phx.gen.auth + email 가지고 연동/가입 시키기
- 유저/roles/멤버/구룹 까지만 디비 작업
- 디비에 정보 저장하기
- 디비 정보 쉽게 보는 페이지들
  - 새신자
  - 공동체
  - 셀
- endpoint 몇개 만들기
  - 가입하고 role 따라 엑세스
  - 축복팀 이번주 생일자 뽑기 (카톡방에 나눠주는 포맷대로)
  - 새신자





![](https://i.imgur.com/ZOegawm.jpg)




![](https://i.imgur.com/heV3dFi.jpg)




![](https://i.imgur.com/QUanRPM.jpg)



